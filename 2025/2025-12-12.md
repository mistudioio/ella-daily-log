## ðŸ§© What I worked on today

- Deployed ShipSharp API to Fly.io and validated the containerized production environment
- Integrated Google OAuth with ASP.NET Core Identity
- Configured Google Cloud OAuth credentials and authorized redirect URIs for:
  - Local development
  - Fly.io production
- Implemented external login flow with Google â†’ user creation â†’ role assignment
- Connected Google login to multi-tenant logic (default tenant assignment)
- Generated JWT tokens after OAuth login and set secure cookies
- Added Forwarded Headers middleware to handle HTTPS behind Fly.io proxy
- Investigated OAuth redirect_uri_mismatch and 500 callback errors
- Reviewed Fly.io logs to trace authentication failures and state issues

## ðŸ¤” Notes / Problem solving

- OAuth errors were not caused by credentials, but by subtle infrastructure + framework interactions:
  - ASP.NET Identity requires external login flow (SignInManager.GetExternalLoginInfoAsync)
  - Google OAuth is very sensitive to exact redirect URLs (scheme, path, casing)
  - Fly.io terminates HTTPS â†’ app receives HTTP unless X-Forwarded-Proto is handled correctly
- Learned that:
  - OAuth failures can still occur after successful Google consent
    -Cookies + SameSite + Secure flags can break OAuth if misconfigured
  - A 302 success does not mean OAuth completed correctly
- Confirmed database, secrets, and environment variables are loading correctly in production
- Identified that OAuth debugging requires logs + browser redirects + Google console together

## ðŸŒ± Learning

- Deepened understanding of OAuth 2.0 flows in ASP.NET Core
- Learned how external authentication schemes differ from JWT auth
- Gained experience debugging cloud-hosted OAuth behind reverse proxies
- Better understanding of: -`X-Forwarded-Proto`
  - Correlation cookies
  - Identity vs API-first auth design
